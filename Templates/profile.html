{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div class="row mt-5">
        <div class="col-lg-3">
            <div class="container">
                <ul class="nav flex-column bg-white shadow-lg p-2">
                  <li class="nav-item">
                       <h4 class="text-primary-clr text-center pt-3">Hello {{user.username|title}}</h4>
                  </li>
                   <hr>
                  <li class="nav-item">
                    <a class="nav-link active text-secondary-clr" data-bs-toggle="tab" data-bs-target="#prsnl_info" type="button" role="tab" aria-controls="prsnl_info" aria-selected="true">Personal Information</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link text-secondary-clr" data-bs-toggle="tab" data-bs-target="#change_password" type="button" role="tab" aria-controls="change_password" aria-selected="false">Change Password</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link text-secondary-clr" data-bs-toggle="tab">Account Deactivate</a>
                  </li>
                    <hr>
                    <li class="nav-item">
                       <h6 class="text-secondary-clr text-center">Last login at <br>{{user.last_login}}</h6>
                  </li>
                </ul>
            </div>
        </div>
        <div class="col-lg-9 tab-content">
            <div class="container tab-pane active" id="prsnl_info" role="tabpanel">
                <form method="POST" id="ProfileForm" class="bg-white shadow-lg p-5">
                  {% csrf_token %}
                    {% if messages %}
                        {% for message in messages %}
                            <div class="alert {% if message.tags == success %}alert-success{% else %} alert-danger {% endif %} alert-dismissible fade show" role="alert">
                              {{ message }}
                              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        {% endfor %}
                    {% endif %}
                    <h2 class="pb-2 text-primary-clr">Personal Information</h2>
                  <div class="form-floating mb-3">
                    <input type="text" class="form-control rounded-4" id="f_name" name="f_name" placeholder="First Name" value="{{user.first_name}}" minlength="2" required disabled>
                    <label for="f_name" class="text-secondary-clr">First Name</label>
                    <small class="text-danger"></small>
                  </div>
                  <div class="form-floating mb-3">
                    <input type="text" class="form-control rounded-4" id="l_name" name="l_name" placeholder="Last Name" value="{{user.last_name}}" minlength="2" required disabled>
                    <label for="l_name" class="text-secondary-clr">Last Name</label>
                    <small class="text-danger"></small>
                  </div>
                  <div class="form-floating mb-3">
                    <input type="email" class="form-control rounded-4" id="txt_email" name="txt_email" placeholder="Email" value="{{user.email}}"required disabled>
                    <label for="txt_email" class="text-secondary-clr">Email</label>
                    <small class="text-danger"></small>
                  </div>
                  <div class="d-flex justify-content-start">
                  <button class="mb-2 btn btn-lg btn-outline-secondary me-2" id="btn_edit" type="button">Edit</button>
                  <button class="mb-2 btn btn-lg border-0 bg-purple" type="submit" style="color: white;" id="btn_profile_submit" hidden>Submit</button>
                  </div>
                </form>
            </div>
            <div class="container tab-pane" id="change_password" role="tabpanel">
                <form method="POST" action="{% url 'change_password' %}" class="bg-white shadow-lg p-5">
                  {% csrf_token %}
                    {% if messages %}
                        {% for message in messages %}
                            <div class="alert {% if message.tags == success %} alert-success {% else %} alert-danger {% endif %} alert-dismissible fade show" role="alert">
                              {{ messages }}
                              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        {% endfor %}
                    {% endif %}
                    <h2 class="pb-2 text-primary-clr">Change Password</h2>
                  <div class="form-floating mb-3">
                    <input type="password" class="form-control rounded-4" id="old_password" name="old_password" placeholder="Old Password"  required>
                    <label for="old_password" class="text-secondary-clr">Old Password</label>
                    <small class="text-danger"></small>
                  </div>
                  <div class="form-floating mb-3">
                    <input type="password" class="form-control rounded-4" id="new_password" name="new_password" placeholder="New Password"  minlength="2" required>
                    <label for="new_password" class="text-secondary-clr">New Password</label>
                    <small class="text-danger"></small>
                  </div>
                  <div class="form-floating mb-3">
                    <input type="password" class="form-control rounded-4" id="confirm_password" name="confirm_password" placeholder="Confirm Password" required>
                    <label for="confirm_password" class="text-secondary-clr">Confirm Password</label>
                    <small class="text-danger"></small>
                  </div>
                  <div class="d-flex justify-content-start">
                  <button class="mb-2 btn btn-lg border-0 bg-purple" type="submit" style="color: white;" id="btn_change_password">Submit</button>
                  </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock content %}